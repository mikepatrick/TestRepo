!lastmodified ----- 
!contents 
!include .ServPfTests.DefaultSettings
## "regular", with email, with pickem, with both
!define client {MSP}
!define sendOrderService {https://qa-service.mycdsglobal.com/ws/service/order/}
!define lookupCustomerService {https://qa-service.mycdsglobal.com/ws/service/customer/}
!define lookupOrderService {https://qa-service.mycdsglobal.com/ws/service/order/}
!define lookupSeriesService {https://qa-service.mycdsglobal.com/ws/service/series/}

!3 Multiple recipients, with emails and gift messages.  Second order adds pickems.

!|smartrics.rest.fitnesse.fixture.CdsRestFixture|${sendOrderService}${client}/|
|setBody|<order><transactionSource> <emplId>302</emplId></transactionSource><promotionKey>CONTHCSF</promotionKey><internetNumber>INET000001</internetNumber><sourceCode>10</sourceCode><customer><accountNumber></accountNumber><name>Sid Wishus</name><address1>3318 48th St</address1><address2>GiftContinuity .MyTests.OrdersStuff.PayPal.PaypalOrders.MultiItems</address2><address3>Order #1 donor</address3><city>Lenox</city><state>IA</state><zipCode>50851X</zipCode><email>yellow11@yahoo.com</email><phoneNumber>5154467798</phoneNumber><phoneNumber2>3341152154</phoneNumber2></customer><payment><paymentType>presettled</paymentType><creditCardNumber></creditCardNumber><creditCardType>PY</creditCardType><creditCardExpire>1124</creditCardExpire><authorizationCode></authorizationCode><authorizationDate>2013-09-13</authorizationDate><authorizationReference>23389PAY33PAL67</authorizationReference> <authorizationInd>P</authorizationInd><presettledSwitch>Y</presettledSwitch><amountPaid>234.00</amountPaid></payment><orderItem><productNumber>HCS1312</productNumber><quantity>1</quantity><value>8.00</value> </orderItem><orderItem><productNumber>APW2009</productNumber> <quantity>1</quantity> <value>70.00</value> <customerGetsRefund>N</customerGetsRefund></orderItem><orderItem><productNumber>HCS1312</productNumber><quantity>1</quantity><value>8.00</value><orderType/> <previewItem/><previewAmt/><previewDays/><customerGetsRefund>N</customerGetsRefund> <giftMessage>Enjoy the gift Jonesy!</giftMessage><recipient> <name>hOMELY Joanie</name><address1>22233 shington Blvd</address1><address2>GiftContinuity .MyTests.OrdersStuff.PayPal.PaypalOrders.MultiItems</address2><address3>Order #1 recip #1</address3><city>Winterset</city> <state>IA</state><zipCode>50273</zipCode> <email>billyblast1323@cds-global.com</email><phoneNumber/><phoneNumber2/></recipient></orderItem><orderItem><productNumber>APW2009</productNumber><quantity>1</quantity><value>70.00</value><orderType/><previewItem/><previewAmt/><previewDays/><customerGetsRefund>N</customerGetsRefund><giftMessage>Enjoy the gift Dilly!</giftMessage><recipient><name>gREEN Gene</name><address1>33 rHthyM Ave</address1><address2>GiftContinuity .MyTests.OrdersStuff.PayPal.PaypalOrders.MultiItems</address2><address3>Order #1 recip #2</address3><city>Winterset</city> <state>IA</state><zipCode>50273</zipCode><email>llamaman3DD39@cds-global.com</email><phoneNumber/><phoneNumber2/></recipient></orderItem><orderItem><productNumber>HCS1312</productNumber><quantity>1</quantity><value>8.00</value><orderType/><previewItem/><previewAmt/><previewDays/><customerGetsRefund>N</customerGetsRefund><giftMessage>Enjoy the gift Stranger!</giftMessage><recipient><name>aCEOF Basin</name><address1>75 Ashy Knees Lane</address1><address2>GiftContinuity .MyTests.OrdersStuff.PayPal.PaypalOrders.MultiItems</address2><address3>Order #1 recip #3</address3><city>Winterset</city><state>IA</state><zipCode>50273</zipCode> <email>inthebasin@cdsb-global.com</email><phoneNumber>5152516497</phoneNumber><phoneNumber2/> </recipient> </orderItem><orderItem><productNumber>APW2009</productNumber><quantity>1</quantity><value>70.00</value><orderType/><previewItem/><previewAmt/><previewDays/><customerGetsRefund>N</customerGetsRefund><giftMessage>Enjoy the gift Stranger!</giftMessage><recipient><name>aCEOF Basin</name><address1>75 Ashy Knees Lane</address1><address2>GiftContinuity .MyTests.OrdersStuff.PayPal.PaypalOrders.MultiItems</address2><address3>Order #1 recip #4</address3><city>Winterset</city><state>IA</state><zipCode>50273</zipCode> <email>inthebasin@cdsb-global.com</email><phoneNumber>5152516497</phoneNumber><phoneNumber2/> </recipient> </orderItem> </order> | 
| POST   | /resources/ | 201 | Content-Type : text/xml|//isSuccess[text()='true']|
| let |acctNbr| body |//accountNumber/text()||
|setBody|<order><transactionSource> <emplId>302</emplId></transactionSource><promotionKey>CONTHCSF</promotionKey><internetNumber>INET00000002</internetNumber><sourceCode>10</sourceCode><customer><accountNumber></accountNumber><name>Sid vishes</name><address1>181818 8th St</address1><address2>GiftContinuity .MyTests.OrdersStuff.PayPal.PaypalOrders.MultiItems</address2><address3>Order #2 donor</address3><city>Lenox</city><state>IA</state><zipCode>50851X</zipCode><email>mostvishesest@yahoo.com</email><phoneNumber>5154467798</phoneNumber><phoneNumber2>3341152154</phoneNumber2></customer><payment><paymentType>presettled</paymentType><creditCardNumber></creditCardNumber><creditCardType>PY</creditCardType><creditCardExpire>1124</creditCardExpire><authorizationCode></authorizationCode><authorizationDate>2013-09-13</authorizationDate><authorizationReference>23389PAY33PAL67</authorizationReference> <authorizationInd>P</authorizationInd><presettledSwitch>Y</presettledSwitch><amountPaid>210.00</amountPaid></payment><orderItem><productNumber>HCS1312</productNumber><quantity>1</quantity><value>8.00</value> <pickem><entry><pickemNbr>1</pickemNbr><productNbr>HCS1311</productNbr></entry><entry><pickemNbr>2</pickemNbr><productNbr>HCS1307</productNbr></entry><entry><pickemNbr>3</pickemNbr><productNbr>HCS1308</productNbr></entry></pickem></orderItem><orderItem><productNumber>HCS1312</productNumber><quantity>1</quantity><value>8.00</value><orderType/> <previewItem/><previewAmt/><previewDays/><customerGetsRefund>N</customerGetsRefund> <giftMessage>Enjoy the gift Jonesy!</giftMessage><recipient> <name>Slick Rick</name><address1>222 Hershington Blvd</address1><address2>GiftContinuity .MyTests.OrdersStuff.PayPal.PaypalOrders.MultiItems</address2><address3>Order #2 recip #1</address3><city>Winterset</city> <state>IA</state><zipCode>50273</zipCode> <email>srick@cds-global.com</email><phoneNumber/><phoneNumber2/></recipient><pickem><entry><pickemNbr>1</pickemNbr><productNbr>HCS1311</productNbr></entry><entry><pickemNbr>2</pickemNbr><productNbr>HCS1307</productNbr></entry><entry><pickemNbr>3</pickemNbr><productNbr>HCS1308</productNbr></entry></pickem></orderItem><orderItem><productNumber>APW2009</productNumber><quantity>1</quantity><value>70.00</value><orderType/> <previewItem/><previewAmt/><previewDays/><customerGetsRefund>N</customerGetsRefund> <giftMessage>Enjoy the gift Jonesy!</giftMessage><recipient> <name>Slick Rick</name><address1>222 Hershington Blvd</address1><address2>GiftContinuity .MyTests.OrdersStuff.PayPal.PaypalOrders.MultiItems</address2><address3>Order #2 recip #1</address3><city>Winterset</city> <state>IA</state><zipCode>50273</zipCode> <email>srick@cds-global.com</email><phoneNumber/><phoneNumber2/></recipient></orderItem><orderItem><productNumber>APW2009</productNumber><quantity>1</quantity><value>70.00</value><orderType/><previewItem/><previewAmt/><previewDays/><customerGetsRefund>N</customerGetsRefund><giftMessage>Enjoy the gift Dilly!</giftMessage><recipient><name>Green Jeans</name><address1>33 rHthyM Ave</address1><address2>GiftContinuity .MyTests.OrdersStuff.PayPal.PaypalOrders.MultiItems</address2><address3>Order #2 recip #2</address3><city>Winterset</city> <state>IA</state><zipCode>50273</zipCode><email>detindemjeans@cds-global.com</email><phoneNumber/><phoneNumber2/></recipient><pickem><entry><pickemNbr>1</pickemNbr><productNbr>HCS1311</productNbr></entry><entry><pickemNbr>2</pickemNbr><productNbr>HCS1307</productNbr></entry><entry><pickemNbr>3</pickemNbr><productNbr>HCS1308</productNbr></entry></pickem></orderItem><orderItem><productNumber>HCS1312</productNumber><quantity>1</quantity><value>8.00</value><orderType/><previewItem/><previewAmt/><previewDays/><customerGetsRefund>N</customerGetsRefund><giftMessage>Enjoy the gift Stranger!</giftMessage><recipient><name>Lewis Dewey</name><address1>755 Ashy Elbows Lane</address1><address2>GiftContinuity .MyTests.OrdersStuff.PayPal.PaypalOrders.MultiItems</address2><address3>Order #2 recip #3</address3><city>Winterset</city><state>IA</state><zipCode>50273</zipCode> <email>lewisdew@cdsb-global.com</email><phoneNumber>5152516497</phoneNumber><phoneNumber2/> </recipient><pickem><entry><pickemNbr>1</pickemNbr><productNbr>HCS1311</productNbr></entry><entry><pickemNbr>2</pickemNbr><productNbr>HCS1307</productNbr></entry><entry><pickemNbr>3</pickemNbr><productNbr>HCS1308</productNbr></entry></pickem> </orderItem> </order> | 
| POST   | /resources/ | 201 | Content-Type : text/xml|//isSuccess[text()='true']|
| let |acctNbr| body |//accountNumber/text()||
