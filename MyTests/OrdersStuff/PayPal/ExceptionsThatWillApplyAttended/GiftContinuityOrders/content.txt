!lastmodified ----- 
!contents 
!include .ServPfTests.DefaultSettings
## "regular", with email, with pickem, with both
!define client {MSP}
!define sendOrderService {https://qa-service.mycdsglobal.com/ws/service/order/}
!define lookupCustomerService {https://qa-service.mycdsglobal.com/ws/service/customer/}
!define lookupOrderService {https://qa-service.mycdsglobal.com/ws/service/order/}
!define lookupSeriesService {https://qa-service.mycdsglobal.com/ws/service/series/}

!3 Multiple recipients, with emails and gift messages.  Second order adds pickems
!4 First order donor has foreign zip.  Second order all recipients have foreign zip.
!|smartrics.rest.fitnesse.fixture.CdsRestFixture|${sendOrderService}${client}/|
|setBody|<order><transactionSource> <emplId>302</emplId></transactionSource><promotionKey>CONTHCSF</promotionKey><internetNumber>INET00000003</internetNumber><sourceCode>10</sourceCode><customer><accountNumber></accountNumber><name>SidNEY Lids</name><address1>1818 228th St</address1><address2>Gift Continuity</address2><address3>Order #1 donor</address3><city>Bath</city><state></state><zipCode>Z31AAA</zipCode><email>lid@yahoo.com</email><phoneNumber>5154467798</phoneNumber><phoneNumber2>3341152154</phoneNumber2></customer><payment><paymentType>presettled</paymentType><creditCardNumber></creditCardNumber><creditCardType>PY</creditCardType><creditCardExpire>1124</creditCardExpire><authorizationCode></authorizationCode><authorizationDate>2013-09-13</authorizationDate><authorizationReference>23389PAY33PAL67</authorizationReference> <authorizationInd>P</authorizationInd><presettledSwitch>Y</presettledSwitch><amountPaid>210.00</amountPaid></payment><orderItem><productNumber>HCS1312</productNumber><quantity>1</quantity><value>8.00</value> </orderItem><orderItem><productNumber>HCS1312</productNumber><quantity>1</quantity><value>8.00</value><orderType/> <previewItem/><previewAmt/><previewDays/><customerGetsRefund>N</customerGetsRefund> <giftMessage>Enjoy the gift Jonesy!</giftMessage><recipient> <name>Posing Moses</name><address1>233 Ashington Blvd</address1><address2>Gift Continuity</address2><address3>Order #1 recip #1</address3><city>Winterset</city> <state>IA</state><zipCode>50273</zipCode> <email>billyblast1323@cds-global.com</email><phoneNumber/><phoneNumber2/></recipient></orderItem><orderItem><productNumber>APW2009</productNumber><quantity>1</quantity><value>70.00</value><orderType/><previewItem/><previewAmt/><previewDays/><customerGetsRefund>N</customerGetsRefund><giftMessage>Enjoy the gift Dilly!</giftMessage><recipient><name>Polly Waller</name><address1>3355 rHthyM Ave</address1><address2>Gift Continuity</address2><address3>Order #1 recip #2</address3><city>Winterset</city> <state>IA</state><zipCode>50273</zipCode><email>wantsacracker@cds-global.com</email><phoneNumber/><phoneNumber2/></recipient></orderItem><orderItem><productNumber>HCS1312</productNumber><quantity>1</quantity><value>8.00</value><orderType/><previewItem/><previewAmt/><previewDays/><customerGetsRefund>N</customerGetsRefund><giftMessage>Enjoy the gift Stranger!</giftMessage><recipient><name>Snazzy Clapper</name><address1>337 1/2 Bees Knees Lane</address1><address2>Gift Continuity</address2><address3>Order #1 recip #3</address3><city>Winterset</city><state>IA</state><zipCode>50273</zipCode> <email>clapz@cdsb-global.com</email><phoneNumber>5152516497</phoneNumber><phoneNumber2/> </recipient> </orderItem> </order> | 
| POST   | /resources/ | 201 | Content-Type : text/xml|//isSuccess[text()='true']|
| let |acctNbr| body |//accountNumber/text()||
|setBody|<order><transactionSource> <emplId>302</emplId></transactionSource><promotionKey>CONTHCSF</promotionKey><internetNumber>INET00000004</internetNumber><sourceCode>10</sourceCode><customer><accountNumber></accountNumber><name>Marvin Yarn</name><address1>34348 38th St</address1><address2>Gift Continuity</address2><address3>Order #2 donor</address3><city>Lenox</city><state>IA</state><zipCode>50851</zipCode><email>marv22@yahoo.com</email><phoneNumber>5154467798</phoneNumber><phoneNumber2>3341152154</phoneNumber2></customer><payment><paymentType>presettled</paymentType><creditCardNumber></creditCardNumber><creditCardType>PY</creditCardType><creditCardExpire>1124</creditCardExpire><authorizationCode></authorizationCode><authorizationDate>2013-09-13</authorizationDate><authorizationReference>23389PAY33PAL67</authorizationReference> <authorizationInd>P</authorizationInd><presettledSwitch>Y</presettledSwitch><amountPaid>210.00</amountPaid></payment><orderItem><productNumber>HCS1312</productNumber><quantity>1</quantity><value>8.00</value> <pickem><entry><pickemNbr>1</pickemNbr><productNbr>HCS1311</productNbr></entry><entry><pickemNbr>2</pickemNbr><productNbr>HCS1307</productNbr></entry><entry><pickemNbr>3</pickemNbr><productNbr>HCS1308</productNbr></entry></pickem></orderItem><orderItem><productNumber>HCS1312</productNumber><quantity>1</quantity><value>8.00</value><orderType/> <previewItem/><previewAmt/><previewDays/><customerGetsRefund>N</customerGetsRefund> <giftMessage>Enjoy the gift Jonesy!</giftMessage><recipient> <name>Rick Roll</name><address1>3388 Kensington Blvd</address1><address2>Gift Continuity</address2><address3>Order #2 recip #1</address3><city>Bath</city> <state></state><zipCode>Z31AAA</zipCode> <email>rollin@cds-global.com</email><phoneNumber/><phoneNumber2/></recipient><pickem><entry><pickemNbr>1</pickemNbr><productNbr>HCS1311</productNbr></entry><entry><pickemNbr>2</pickemNbr><productNbr>HCS1307</productNbr></entry><entry><pickemNbr>3</pickemNbr><productNbr>HCS1308</productNbr></entry></pickem></orderItem><orderItem><productNumber>APW2009</productNumber><quantity>1</quantity><value>70.00</value><orderType/><previewItem/><previewAmt/><previewDays/><customerGetsRefund>N</customerGetsRefund><giftMessage>Enjoy the gift Dilly!</giftMessage><recipient><name>Wesley Snopes</name><address1>1133 Boston Ave</address1><address2>Gift Continuity</address2><address3>Order #2 recip #2</address3><city>Bath</city> <state></state><zipCode>Z31AAA</zipCode><email>snopeman@cds-global.com</email><phoneNumber/><phoneNumber2/></recipient><pickem><entry><pickemNbr>1</pickemNbr><productNbr>HCS1311</productNbr></entry><entry><pickemNbr>2</pickemNbr><productNbr>HCS1307</productNbr></entry><entry><pickemNbr>3</pickemNbr><productNbr>HCS1308</productNbr></entry></pickem></orderItem><orderItem><productNumber>HCS1312</productNumber><quantity>1</quantity><value>8.00</value><orderType/><previewItem/><previewAmt/><previewDays/><customerGetsRefund>N</customerGetsRefund><giftMessage>Enjoy the gift Stranger!</giftMessage><recipient><name>Sally O&apos;Malley</name><address1>7555 Lois Lane</address1><address2>Gift Continuity</address2><address3>Order #2 recip #3</address3><city>Bath</city><state></state><zipCode>Z31AAA</zipCode> <email>sallysez@cdsb-global.com</email><phoneNumber>5152516497</phoneNumber><phoneNumber2/> </recipient><pickem><entry><pickemNbr>1</pickemNbr><productNbr>HCS1311</productNbr></entry><entry><pickemNbr>2</pickemNbr><productNbr>HCS1307</productNbr></entry><entry><pickemNbr>3</pickemNbr><productNbr>HCS1308</productNbr></entry></pickem> </orderItem> </order> | 
| POST   | /resources/ | 201 | Content-Type : text/xml|//isSuccess[text()='true']|
| let |acctNbr| body |//accountNumber/text()||
